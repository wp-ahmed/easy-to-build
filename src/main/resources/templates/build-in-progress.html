<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <!-- Add your other head elements here -->
    <link rel="stylesheet" th:href="@{/CSS/loading-style.css}"/>
</head>
<body>
<main>
    <div class="tower">
        <div class="tower__group">
            <div class="tower__brick-layer tower__brick-layer--4">
                <div class="tower__brick tower__brick--0">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
                <div class="tower__brick tower__brick--90 tower__brick--red">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
                <div class="tower__brick tower__brick--180 tower__brick--orange">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
                <div class="tower__brick tower__brick--270 tower__brick--purple">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
            </div>
            <div class="tower__brick-layer tower__brick-layer--3">
                <div class="tower__brick tower__brick--45 tower__brick--magenta">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
                <div class="tower__brick tower__brick--135">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
                <div class="tower__brick tower__brick--225 tower__brick--green">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
                <div class="tower__brick tower__brick--315 tower__brick--orange">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
            </div>
            <div class="tower__brick-layer tower__brick-layer--2">
                <div class="tower__brick tower__brick--0 tower__brick--red">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
                <div class="tower__brick tower__brick--90 tower__brick--green">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
                <div class="tower__brick tower__brick--180 tower__brick--purple">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
                <div class="tower__brick tower__brick--270">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
            </div>
            <div class="tower__brick-layer tower__brick-layer--1">
                <div class="tower__brick tower__brick--45 tower__brick--purple">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
                <div class="tower__brick tower__brick--135 tower__brick--magenta">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
                <div class="tower__brick tower__brick--225 tower__brick--red">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
                <div class="tower__brick tower__brick--315 tower__brick--green">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
            </div>
            <div class="tower__brick-layer">
                <div class="tower__brick tower__brick--0 tower__brick--move14">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
                <div class="tower__brick tower__brick--90 tower__brick--red tower__brick--move13">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
                <div class="tower__brick tower__brick--180 tower__brick--orange tower__brick--move16">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
                <div class="tower__brick tower__brick--270 tower__brick--purple tower__brick--move15">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
            </div>
            <div class="tower__brick-layer tower__brick-layer---1">
                <div class="tower__brick tower__brick--45 tower__brick--move10 tower__brick--magenta">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
                <div class="tower__brick tower__brick--135 tower__brick--move9">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
                <div class="tower__brick tower__brick--225 tower__brick--green tower__brick--move12">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
                <div class="tower__brick tower__brick--315 tower__brick--orange tower__brick--move11">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
            </div>
            <div class="tower__brick-layer tower__brick-layer---2">
                <div class="tower__brick tower__brick--0 tower__brick--red tower__brick--move6">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
                <div class="tower__brick tower__brick--90 tower__brick--green tower__brick--move5">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
                <div class="tower__brick tower__brick--180 tower__brick--purple tower__brick--move8">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
                <div class="tower__brick tower__brick--270 tower__brick--move7">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
            </div>
            <div class="tower__brick-layer tower__brick-layer---3">
                <div class="tower__brick tower__brick--45 tower__brick--purple tower__brick--move2">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
                <div class="tower__brick tower__brick--135 tower__brick--magenta tower__brick--move1">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
                <div class="tower__brick tower__brick--225 tower__brick--red tower__brick--move4">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
                <div class="tower__brick tower__brick--315 tower__brick--green tower__brick--move3">
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-side"></div>
                    <div class="tower__brick-stud"></div>
                    <div class="tower__brick-stud"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="message">
        <p class="message__line">Building in progress…</p>
        <p class="message__line">Sorting out the pieces…</p>
        <p class="message__line">Assembling one brick at a time…</p>
        <p class="message__line">Following every step…</p>
        <p class="message__line">Being very careful not to step on the pieces…</p>
        <p class="message__line">Trying not to get finger blisters…</p>
        <p class="message__line">Might take longer to build than the Death Star…</p>
        <p class="message__line">Wrapping it up…</p>
    </div>
</main>
<!-- Add your other content here -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script th:inline="javascript">
    var business = /*[[${business}]]*/ null;
</script>
<script>
    $(document).ready(function() {
        var startTime = Date.now();

        function updateProgress() {
            var currentTime = Date.now();
            var elapsedTime = currentTime - startTime;
            if (elapsedTime >= 120000) {
                window.location.href = "/failure-build";
                return;
            }

            $.ajax({
                url: "/get-progress?name="+business,
                type: "GET",
                success: function(result) {
                    if (result === "SUCCESS") {
                        // Redirect to success page
                        window.location.href = "/success-build";
                    } else if(result==="null"){
                        // Continue calling updateProgress()
                        setTimeout(updateProgress, 1000);
                    }else{
                        window.location.href = "/failure-build";
                    }
                },error: function() {
                    window.location.href = "/failure-build";
                }
            });
        }
        updateProgress();
    });
</script>
</body>
</html>